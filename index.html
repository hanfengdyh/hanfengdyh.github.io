<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>涵风 Blog</title><meta name="author" content="HF"><meta name="copyright" content="HF"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="涵风 Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="涵风 Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/touxaing.gif">
<meta property="article:author" content="HF">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/touxaing.gif"><link rel="shortcut icon" href="/img/tubiao.png"><link rel="canonical" href="http://example.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '涵风 Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-03-22 19:54:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxaing.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/wallhaven.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">涵风 Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">涵风 Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/22/2023-3-22-bootcmd%E5%92%8Cbootargs%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" title="bootcmd和bootargs环境变量"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="bootcmd和bootargs环境变量"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/22/2023-3-22-bootcmd%E5%92%8Cbootargs%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" title="bootcmd和bootargs环境变量">bootcmd和bootargs环境变量</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-22T11:30:00.000Z" title="发表于 2023-03-22 19:30:00">2023-03-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/">系统移植</a></span></div><div class="content">环境变量bootcmdbootcmd 保存着 uboot 默认命令， uboot 倒计时结束以后就会执行 bootcmd 中的命令。这些命令一般都是用来启动 Linux 内核的，比如读取 EMMC 或者 NAND Flash 中的 Linux 内核镜像文件和设备树文件到 DRAM 中，然后启动 Linux 内核。 
如果 EMMC 或者 NAND 中没有保存 bootcmd 的值，那么 uboot 就会使用默认的值，板子第一次运行 uboot 的时候都会使用默认值来设置 bootcmd 环境变量。 
不设置bootcmd使用默认从emmc启动，那么可以定义CONFIG_BOOTCOMMAND
12345#define CONFIG_BOOTCOMMAND \&quot;mmc dev 1;&quot; \&quot;fatload mmc 1:1 0x80800000 zImage;&quot; \&quot;fatload mmc 1:1 0x83000000 imx6ull-alientek-emmc.dtb;&quot; \&quot;bootz 0x80800000 - 0x8 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/21/2023-3-21-U-Boot%E7%A7%BB%E6%A4%8D/" title="U-Boot移植"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="U-Boot移植"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/21/2023-3-21-U-Boot%E7%A7%BB%E6%A4%8D/" title="U-Boot移植">U-Boot移植</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-21T08:30:00.000Z" title="发表于 2023-03-21 16:30:00">2023-03-21</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/">系统移植</a></span></div><div class="content">Uboot的移植首先从官方下载一个Uboot，之后在此上面进行移植，可以进行使用脚本进行编译一下。
123make ARCH=arm CORSS_COMPILE=arm-linux-gnueabihf- distcleanmake ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- mx6ull_14x14_evk_emmc_defconfigmake V=1 ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j16

在Uboot中添加使用的开发板添加开发板默认配置文件将cofigs目录下复制原有的mx6ull_14x14_evk_emmc_defconfig进行修改
1cp mx6ull_14x14_evk_emmc_defconfig mx6ull_alientek_emmc_defconfig

修改mx6ull_alientek_emmc_defconfig文件，将原有的替换成mx6ull_alientek_emmc
12345CONFIG_SYS_EXTRA_OPTIONS=&quot;IMX_CO ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/17/2023-3-17-U-Boot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="U-Boot启动流程"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="U-Boot启动流程"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/17/2023-3-17-U-Boot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="U-Boot启动流程">U-Boot启动流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-17T06:30:00.000Z" title="发表于 2023-03-17 14:30:00">2023-03-17</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/">系统移植</a></span></div><div class="content">Uboot顶层Makefile详解(123条消息) U-Boot 顶层 Makefile 详解_River-D的博客-CSDN博客



名字
描述
备注



api
与硬件无关的 API 函数。
uboot 自带


arch
与架构体系有关的代码
uboot 自带


board
不同板子的代码
uboot 自带


cmd
命令相关的代码
uboot 自带


common
通用代码
uboot 自带


configs
配置文件
uboot 自带


disk
磁盘分区相关代码
uboot 自带


doc
文档
uboot 自带


drivers
驱动代码
uboot 自带


dts
设备树
uboot 自带


examples
示例代码
uboot 自带


fs
文件系统
uboot 自带


include
头文件
uboot 自带


lib
库文件
uboot 自带


Licenses
许可证相关代码
uboot 自带


net
网络相关代码
uboot 自带


post
上电自检代码
uboot 自带


scripts
脚本文件
uboot 自带
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/16/2023-3-15-imx6ull-SPI%E6%8E%A7%E5%88%B6%E5%85%AD%E8%BD%B4/" title="imx6ull SPI控制六轴"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="imx6ull SPI控制六轴"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/16/2023-3-15-imx6ull-SPI%E6%8E%A7%E5%88%B6%E5%85%AD%E8%BD%B4/" title="imx6ull SPI控制六轴">imx6ull SPI控制六轴</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-16T12:30:27.000Z" title="发表于 2023-03-16 20:30:27">2023-03-16</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">SPISPI 全称是 Serial Perripheral Interface，也就是串行外围设备接口。是一种高速、全双工的同步通信总线，SPI 时钟频率相比 I2C 要高很多，最高可以工作在上百 MHz。
SPI原理超详细讲解-值得一看 (stmicroelectronics.cn)

支持单主多从模式应用，时钟由Master控制，在时钟移位脉冲下，数据按位传输，高位在前，低位在后（MSB first）。 4线SPI器件有四个信号：时钟(SPI CLK, SCLK)、主机输出从机输入(MOSI)、主机输入从机输出(MISO)、片选(CS&#x2F;NSS)。

SPI数据传输在MOSI、MISO和SPI主从机内部的数据寄存器构成一个数据串行传输的环路，在时钟SCLK的控制下实现数据的环形传输。 要开始SPI通信，主机必须发送时钟信号，并通过使能NSS信号选择从机。
SPI只有主模式和从模式之分，没有读和写的说法，外设的写操作和读操作是同步完成的。如果只进行写操作，主机只需忽略接收到的字节；反之，若主机要读取从机的一个字节，就必须发送一个空字节来引发从机的传输。也就是说，你发一个数据必 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/16/2023-3-16-git%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/" title="git提交代码到远程仓库"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="git提交代码到远程仓库"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/16/2023-3-16-git%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/" title="git提交代码到远程仓库">git提交代码到远程仓库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-16T05:27:27.000Z" title="发表于 2023-03-16 13:27:27">2023-03-16</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AE%9E%E6%88%98/">实战</a></span></div><div class="content">git如何提交代码到远程仓库使用这个的原因的是看到有的嵌入式就职询问会问道，而且使用git可以将本地代码部署到github，可以备份，多台电脑开发一个工程很方便。
首先是进行安装git再Linux的系统
1sudo apt-get install git

注册用户名和邮箱
12git config --global user.name &quot;用户名&quot;git config --global user.email &quot;邮箱&quot;

检查配置信息的命令
1git config --list

使用git clone从现有的git仓库中拷贝项目
1git clone 仓库地址


如果克隆到指定目录
1git clone 仓库地址 目录

如果git clone卡住了，可以参考以下链接极智开发 | 解决 linux 上 git clone 慢或失败的方法 - 知乎 (zhihu.com)
之后就可以往这个目录中写入文件，之后使用以下命令进行部署
123456789101112git add .这个命令是将目录下的所有文件添加到暂存区域git add 文件名添加文 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/14/2023-3-14-Imx6ull%E6%95%B0%E6%8D%AE%E6%89%8B%E5%86%8C%E7%94%9F%E8%AF%8D/" title="Imx6ull数据手册生词"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="Imx6ull数据手册生词"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/14/2023-3-14-Imx6ull%E6%95%B0%E6%8D%AE%E6%89%8B%E5%86%8C%E7%94%9F%E8%AF%8D/" title="Imx6ull数据手册生词">Imx6ull数据手册生词</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-14T07:20:27.000Z" title="发表于 2023-03-14 15:20:27">2023-03-14</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">


生词
汉译



prescaler
预分频器


programmable
可编程


route
线路


formula
公式


subroutine
子程序


reprogram
重新编程


parameter
参数


slave
从机


arbitration
仲裁


addressed
解决


multiplexing
多路复用


acknowledge signal
应答信号


master drive high
主驱动器高


pending
待定


idle
闲置


muxe
多路复用器


peripheral
外设


dedicated software
专用软件


daisy chain
菊花链式结构


external
外部


diagram
图


synchronize
同步


field
场


initialize the counter
初始化计数器


duplex
双工


synchronous
同步


polarity
极性


FIFO
先进先出


kernel
内核


relocaddr
搬迁地 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/13/2023-3-13-imx6ull%E7%9A%84IIC%E5%AE%9E%E9%AA%8C/" title="imx6ull的IIC实验"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="imx6ull的IIC实验"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/13/2023-3-13-imx6ull%E7%9A%84IIC%E5%AE%9E%E9%AA%8C/" title="imx6ull的IIC实验">imx6ull的IIC实验</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-13T12:30:27.000Z" title="发表于 2023-03-13 20:30:27">2023-03-13</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">I2C协议IIC是半双工通信（同一时间单向通信），I2C 使用两条线在主控制器和从机之间进行数据通信。一条是 SCL(串行时钟线)，另外一条是 SDA(串行数据线)，这两条数据线需要接上拉电阻，总线空闲的时候 SCL 和 SDA 处于高电平。I2C 总线标准模式下速度可以达到 100Kb&#x2F;S，快速模式下可以达到 400Kb&#x2F;S。I2C 总线工作是按照一定的协议来运行的，接下来就看一下 I2C 协议。
主机就是负责整个系统的任务协调与分配，从机一般是通过接收主机的指令从而完成某些特定的任务，主机和从机之间通过总线连接，进行数据通讯。

发布主要命令的称为主机
接受命令的称为从机

IIC主设备功能：主要产生时钟，产生起始信号，停止信号。
IIC从设备功能：可编程的IIC地址检测，停止位检测。
**IIC的一个优点是它支持多主控(multimastering)**， 其中任何一个能够进行发送和接收的设备都可以成为主总线。一个主控能够控制信号的传输和时钟频率。当然，在任何时间点上只能有一个主控。
I2C是支持多从机应答，也就是一个 I2C 控制器下可以挂多个 I2C 从设 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/10/2023-3-20-imx6ull%E7%9A%84RTC-%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9F%E5%AE%9E%E9%AA%8C/" title="imx6ull的RTC 实时时钟实验"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="imx6ull的RTC 实时时钟实验"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/10/2023-3-20-imx6ull%E7%9A%84RTC-%E5%AE%9E%E6%97%B6%E6%97%B6%E9%92%9F%E5%AE%9E%E9%AA%8C/" title="imx6ull的RTC 实时时钟实验">imx6ull的RTC 实时时钟实验</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-10T08:30:27.000Z" title="发表于 2023-03-10 16:30:27">2023-03-10</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">实时时钟实现原理I.MX6U 系列的 RTC 是在 SNVS 里面，SNVS 直译过来就是安全的非易性存储，SNVS 里面主要是一些低功耗的外设，包括一个安全的实时计数器(RTC)、一个单调计数器(monotonic counter)和一些通用的寄存器。SNVS 有两部分：SNVS_HP 和 SNVS_LP，系统主电源断电以后 SNVS_HP 也会断电，但是在后备电源支持下，SNVS_LP 是不会断电的，而且 SNVS_LP是和芯片复位隔离开的，因此 SNVS_LP 相关的寄存器的值会一直保存着。
①、SNVS_LP：专用的always-powered-on电源域，系统主电源和备用电源都可以为其供电。②、SNVS_HP：系统（芯片）电源。
SNVS_LP和SNVS_LP都有SRTC，为保证掉电后依旧可以执行，所以设置SNVS_LP中的SRTC来实现实时时钟。
在硬件方面，SRTC需要外界提供一个32.768KHz的时钟，寄存器 SNVS_LPSRTCMR 和 SNVS_LPSRTCLR 保存着秒数，直接读取这两个寄存器的值就知道过了多长时间了。

使用的SNVS寄存器：①SNVS_HP ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/07/2023-3-06-%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/" title="补充知识点"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="补充知识点"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/07/2023-3-06-%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/" title="补充知识点">补充知识点</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-07T08:30:27.000Z" title="发表于 2023-03-07 16:30:27">2023-03-07</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">嵌入式面向对象编程面向对象，是编程界的一个概念。什么叫面向对象呢？编程有两种要素：程序（方法），数据（属性）。例如：一个LED，我们可以点亮或者熄灭它，这叫方法。LED什么状态？亮还是灭？这就是属性。我们通常这样编程：
12345u8 ledsta = 0;void ledset(u8 sta)&#123;&#125;

这样的编程有一个问题，假如我们有10个这样的LED，怎么写？这时我们可以引入面向对象编程，将每一个LED封装为一个对象。可以这样做：
1234567891011121314151617181920212223242526272829303132333435363738394041424344/*定义一个结构体，将LED这个对象的属性跟方法封装。这个结构体就是一个对象。但是这个不是一个真实的存在，而是一个对象的抽象。*/typedef struct&#123;	u8 sta;	void (*setsta)(u8 sta);&#125;LedObj;/* 声明一个LED对象，名称叫做LED1，并且实现它的方法drv_led1_setsta*/void drv_led1_s ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/03/06/2023-3-06-imx6u%E7%9A%84RGBlCD%E6%98%BE%E7%A4%BA/" title="imx6u的RGBlCD显示"><img class="post_bg" src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="imx6u的RGBlCD显示"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/06/2023-3-06-imx6u%E7%9A%84RGBlCD%E6%98%BE%E7%A4%BA/" title="imx6u的RGBlCD显示">imx6u的RGBlCD显示</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-06T08:30:27.000Z" title="发表于 2023-03-06 16:30:27">2023-03-06</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/">裸机开发</a></span></div><div class="content">像素格式一个像素点就相当于一个 RGB 小灯，通过控制 R、G、B 这三种颜色的亮度就可以显示出各种各样的色彩。那该如何控制 R、G、B 这三种颜色的显示亮度呢？一般一个 R、G、B 这三部分分别使用 8bit 的数据，那么一个像素点就是 8bit*3&#x3D;24bit，也就是说一个像素点3 个字节，这种像素格式称为 RGB888。如果再加入 8bit 的 Alpha(透明)通道的话一个像素点就是 32bit，也就是 4 个字节，这种像素格式称为 ARGB8888。

一个像素点是 4 个字节，其中 bit31bit24 是 Alpha 通道，bit23bit16 是RED 通道，bit15bit14 是 GREEN 通道，bit7bit0 是 BLUE 通道。所以红色对应的值就是0X00FF0000，蓝色对应的值就是 0X000000FF，绿色对应的值为 0X0000FF00。通过调节 R、G、B的比例可以产生其它的颜色，比如0X00FFFF00就是黄色，0X00000000就是黑色，0X00FFFFFF就是白色。
R[7:0]、G[7:0]和B[7:0]这24根是数据线，DE、 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxaing.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">HF</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">54</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">加菲猫中的一句话：应该有更好的方式开始新一天,而不是千篇一律地在每个上午都醒来。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/22/2023-3-22-bootcmd%E5%92%8Cbootargs%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" title="bootcmd和bootargs环境变量"><img src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="bootcmd和bootargs环境变量"/></a><div class="content"><a class="title" href="/2023/03/22/2023-3-22-bootcmd%E5%92%8Cbootargs%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" title="bootcmd和bootargs环境变量">bootcmd和bootargs环境变量</a><time datetime="2023-03-22T11:30:00.000Z" title="发表于 2023-03-22 19:30:00">2023-03-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/21/2023-3-21-U-Boot%E7%A7%BB%E6%A4%8D/" title="U-Boot移植"><img src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="U-Boot移植"/></a><div class="content"><a class="title" href="/2023/03/21/2023-3-21-U-Boot%E7%A7%BB%E6%A4%8D/" title="U-Boot移植">U-Boot移植</a><time datetime="2023-03-21T08:30:00.000Z" title="发表于 2023-03-21 16:30:00">2023-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/17/2023-3-17-U-Boot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="U-Boot启动流程"><img src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="U-Boot启动流程"/></a><div class="content"><a class="title" href="/2023/03/17/2023-3-17-U-Boot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="U-Boot启动流程">U-Boot启动流程</a><time datetime="2023-03-17T06:30:00.000Z" title="发表于 2023-03-17 14:30:00">2023-03-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/16/2023-3-15-imx6ull-SPI%E6%8E%A7%E5%88%B6%E5%85%AD%E8%BD%B4/" title="imx6ull SPI控制六轴"><img src="/img/das.png" onerror="this.onerror=null;this.src='/img/fr.gif'" alt="imx6ull SPI控制六轴"/></a><div class="content"><a class="title" href="/2023/03/16/2023-3-15-imx6ull-SPI%E6%8E%A7%E5%88%B6%E5%85%AD%E8%BD%B4/" title="imx6ull SPI控制六轴">imx6ull SPI控制六轴</a><time datetime="2023-03-16T12:30:27.000Z" title="发表于 2023-03-16 20:30:27">2023-03-16</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.27em; color: #99a0a9">C</a> <a href="/tags/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%AF%87/" style="font-size: 1.39em; color: #99a4b4">Linux系统管理篇</a> <a href="/tags/linux/" style="font-size: 1.44em; color: #99a7ba">linux</a> <a href="/tags/makefile/" style="font-size: 1.1em; color: #999">makefile</a> <a href="/tags/%E5%AE%9E%E6%88%98/" style="font-size: 1.33em; color: #99a2af">实战</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.21em; color: #999ea4">操作系统</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/" style="font-size: 1.27em; color: #99a0a9">系统移植</a> <a href="/tags/%E8%A3%B8%E6%9C%BA%E5%BC%80%E5%8F%91/" style="font-size: 1.5em; color: #99a9bf">裸机开发</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.16em; color: #999b9e">随笔</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">54</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2023-03-22T11:54:21.479Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-03-22T11:54:21.479Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By HF</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["物有本末，事有终始，知所先后，则近道矣","少年没有乌托邦 心向远方自明朗","请不要相信胜利就像山坡上的蒲公英一样唾手可得","但是请相信世上总有一些美好值得我们全力以赴","哪怕粉身碎骨","人生不能太圆满  求而不得也未必是遗憾"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '物有本末，事有终始，知所先后，则近道矣'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'neutral' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><div class="aplayer no-destroy" data-id="2127967295" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="true" muted></div><script id="canvas_nest" defer="defer" color="214,237,240" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="/img/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --></body></html>